{% extends "layout.html" %}
{% block content %}

<div class="max-w-md mx-auto mt-6">
    <div class="text-center mb-8">
        <h2 class="text-2xl font-bold text-gray-800">ระบุตัวตนคนขับ</h2>
        <p class="text-gray-500 text-sm">กรุณาเลือกชื่อของคุณเพื่อเริ่มงาน</p>
    </div>

    <div class="relative mb-6">
        <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400">
            <i class="fa-solid fa-magnifying-glass"></i>
        </span>
        <input type="text" id="searchInput" onkeyup="filterDrivers()" 
            class="w-full pl-10 p-3 rounded-xl border border-gray-200 shadow-sm focus:ring-2 focus:ring-blue-500 outline-none" 
            placeholder="ค้นหาชื่อ...">
    </div>

    <div class="space-y-3" id="driverList">
        {% for driver_name in drivers %}
        <a href="/driver/tasks?name={{ driver_name }}" class="driver-card block bg-white border border-gray-200 p-4 rounded-xl shadow-sm hover:shadow-md hover:border-blue-500 transition-all flex justify-between items-center group">
            <div class="flex items-center gap-4">
                <div class="bg-blue-100 text-blue-600 w-10 h-10 rounded-full flex items-center justify-center font-bold">
                    {{ driver_name[0] }}
                </div>
                <span class="font-medium text-lg text-gray-700 group-hover:text-blue-700">{{ driver_name }}</span>
            </div>
            <i class="fa-solid fa-chevron-right text-gray-300 group-hover:text-blue-500"></i>
        </a>
        {% endfor %}
    </div>

    <div id="noResult" class="hidden text-center text-gray-400 mt-10">
        <i class="fa-solid fa-user-slash text-3xl mb-2"></i><br>
        ไม่พบรายชื่อนี้
    </div>
</div>

<script>
    function filterDrivers() {
        var input = document.getElementById("searchInput");
        var filter = input.value.toUpperCase();
        var list = document.getElementById("driverList");
        var cards = list.getElementsByClassName("driver-card");
        var hasResult = false;

        for (var i = 0; i < cards.length; i++) {
            var txtValue = cards[i].textContent || cards[i].innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                cards[i].style.display = "";
                hasResult = true;
            } else {
                cards[i].style.display = "none";
            }
        }
        
        document.getElementById("noResult").style.display = hasResult ? "none" : "block";
    }
</script>

{% endblock %}